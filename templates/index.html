<!-- 
EXTENDS base.html - This means we inherit everything from base.html
We only need to define the blocks we want to change
-->
{% extends 'base.html' %} {% block title %}Home - Task Manager{% endblock %} {%
block content %}
<div class="welcome-section">
  <h2>Welcome to Your Task Manager! ğŸ¯</h2>
  <p>This is a CRUD application where you can:</p>
  <ul class="features-list">
    <li><strong>C</strong>reate - Add new tasks</li>
    <li><strong>R</strong>ead - View all your tasks</li>
    <li><strong>U</strong>pdate - Edit existing tasks</li>
    <li><strong>D</strong>elete - Remove completed tasks</li>
  </ul>
</div>

<div class="tasks-section">
  <h2>Your Tasks</h2>

  <!-- Check if there are any tasks -->
  {% if tasks %}
  <div class="tasks-grid">
    <!-- Loop through each task -->
    {% for task in tasks %}
    <div class="task-card {% if task.completed %}completed{% endif %}">
      <div class="task-header">
        <h3>{{ task.title }}</h3>
        <span class="task-date"
          >{{ task.created_at.strftime('%b %d, %Y') }}</span
        >
      </div>

      {% if task.description %}
      <p class="task-description">{{ task.description }}</p>
      {% endif %}

      <div class="task-status">
        {% if task.completed %}
        <span class="status-badge completed">âœ“ Completed</span>
        {% else %}
        <span class="status-badge pending">â³ Pending</span>
        {% endif %}
      </div>

      <div class="task-actions">
        <!-- Toggle completion button -->
        <a
          href="{{ url_for('toggle_task', task_id=task.id) }}"
          class="btn btn-toggle"
          title="{% if task.completed %}Mark as pending{% else %}Mark as completed{% endif %}"
        >
          {% if task.completed %}â†©ï¸ Reopen{% else %}âœ“ Complete{% endif %}
        </a>

        <!-- Edit button -->
        <a
          href="{{ url_for('edit_task', task_id=task.id) }}"
          class="btn btn-edit"
          title="Edit this task"
        >
          âœï¸ Edit
        </a>

        <!-- Delete button -->
        <a
          href="{{ url_for('delete_task', task_id=task.id) }}"
          class="btn btn-delete"
          onclick="return confirm('Are you sure you want to delete this task?')"
          title="Delete this task"
        >
          ğŸ—‘ï¸ Delete
        </a>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <!-- Show this if no tasks exist -->
  <div class="empty-state">
    <p>ğŸ“­ No tasks yet!</p>
    <p>Click "Add Task" to create your first task.</p>
    <a href="{{ url_for('add_task') }}" class="btn btn-primary"
      >Add Your First Task</a
    >
  </div>
  {% endif %}
</div>

<!-- LEARNING NOTES SECTION -->
<div class="learning-notes">
  <h3>ğŸ“ What You're Learning:</h3>
  <ul>
    <li>
      <strong>Jinja2 Templates:</strong> The {% raw %}{% %}{% endraw %} syntax
      is Jinja2, Flask's templating engine
    </li>
    <li>
      <strong>Template Inheritance:</strong> We extend base.html to reuse common
      HTML
    </li>
    <li>
      <strong>Loops:</strong> {% raw %}{% for task in tasks %}{% endraw %} loops
      through all tasks
    </li>
    <li>
      <strong>Conditionals:</strong> {% raw %}{% if task.completed %}{% endraw
      %} checks if task is done
    </li>
    <li>
      <strong>URL Generation:</strong> {% raw %}{{ url_for('function_name') }}{%
      endraw %} creates URLs safely
    </li>
  </ul>
</div>
{% endblock %}
